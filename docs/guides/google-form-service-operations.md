# 구글폼 기반 조건충족 알림 서비스 운영 설계서 (v1.2)

> 작성일: 2026-02-11
> 최종 업데이트: 2026-02-11
> 목적: 1인 운영 -> 분쟁 최소화 -> 검증 후 확장
> 전제: 웹사이트 없음 / Google Form 중심 / 초기 실험 단계
> 기반 문서: `docs/backlog/google-form-ops-mvp-backlog.md`

## 1. 서비스 정의

### 서비스 한 줄 (외부용)

사용자가 계속 확인하기 어려운 숙소/예약 페이지의 요청 조건 충족 여부를 대신 확인하고,
조건이 충족된 시점(열림 확인)에 알림을 전달하는 서비스

### 내부 정의 (운영자용)

- 이 서비스는 결과를 만들어주는 서비스가 아니라 상태 변화를 탐지·통지하는 서비스다.
- 서비스 산출물은 알림 1회이며, 예약/구매 결과는 산출물에 포함되지 않는다.

## 2. 고객 문제와 타깃

### 핵심 고객 (행동 기반)

아래 행동 중 2개 이상 해당하면 타깃으로 간주한다.

- 하루 3회 이상 예약 페이지를 새로고침한다.
- “혹시 지금 열렸나?” 때문에 수면/업무 방해를 경험한다.
- 무료취소/특정 가격 조건 때문에 즉시 판단이 필요하다.
- 예약 앱 알림을 신뢰하지 않거나, 해당 알림이 제공되지 않는다.

### 구매 결정 트리거

고객은 편의성보다 아래 감정 때문에 결제한다.

- 불안 감소
- 놓침 회피
- 판단 책임의 외주화

## 3. 서비스 범위(계약 기준)

### 기준 원칙

- 판단 기준 단일화: 폼 Q4 원문
- 과금 발생 시점: 조건 충족(열림 확인) 이벤트 발생 시점
- 동일 요청(Case)에서 조건 충족(열림 확인)은 1회만 유효하고, 최초 충족 시점만 과금/알림 이벤트로 인정
- 시작 조건: 결제 확인 후에만 시작

### 판단 기준 우선순위

1. Q4 원문
2. Q4 설명에 포함된 예시 구조
3. 제출 시각 기준 당시 페이지 상태

다음 항목은 판단 근거에서 제외한다.

- 고객 발언(채팅/DM)
- 제출 후 추가 주장
- 사후 기억/해석

### 필수 운영 규칙

- Q4에 없는 조건은 적용하지 않는다.
- 열림 지속시간 조건이 Q4에 없으면 최초 열림 확인 시점을 기준으로 판단한다.
- 고객이 직접 보았는지 여부는 판단 기준이 아니다.
- 요청 접수 및 결제 이후 조건 변경은 허용하지 않는다.
- 조건 변경이 필요하면 기존 건을 종료하고 새 요청으로 재접수한다.
- 운영자는 Q4에 명시되지 않은 조건을 추정/보완/선의로 해석하여 적용하지 않는다.

## 4. 상품/과금 보완안

### 기본 상품 단위

- 단위: 요청 1건 = 케이스 1개
- 케이스 구성: 대상 URL + 기간 + 조건(Q4) + 동의(Q7)

### 과금 규칙 (고정)

- 미충족 종료: 비용 0원
- 조건 충족 1회 이상: 사전 안내된 금액 1회 청구
- 동일 케이스 내 중복 열림: 추가 과금 없음
- 결제 확인 전: 모니터링 시작 불가

### 가격 결정 프로세스 (필수)

Q4 검토 -> 난이도 분류(L/M/H) -> 기간 분류(S/M/L) -> 긴급 여부 판단 -> 내부 산식 적용 -> 고객에게 최종 1회 가격 제시

### 난이도 분류 기준 (예시)

- L(낮음): 조건 3개 이하, 단일 날짜, 단일 가격
- M(중간): 조건 4~6개, 기간 2~3일
- H(높음): 조건 7개 이상, 가격 범위/옵션 조합 복잡

이 분류는 고객 설명용이 아니라 내부 일관성 유지용이다.

### 요금 산정 규칙 (운영자용)

- 기본 원칙: 조건 충족 시 1회 과금
- 권장 산식: 최종요금 = 기본요금 + 기간가중 + 난이도가중 + 긴급도가중
- 운영 규칙:
  - 비용 안내 후 변경 금지(조건 변경 시 새 케이스로 재산정)
  - 케이스 생성 시 산식 근거를 운영 메모에 저장(분쟁 대비)

### 운영자가 사전에 고지할 항목

- 조건 충족(열림 확인) 기준으로만 비용이 발생한다.
- 예약 완료/결제 완료를 보장하지 않는다.
- Q4 기준 외 추가 해석은 적용하지 않는다.

### 가격 산식 표준 템플릿 (v1.2)

아래 템플릿은 1인 운영 초기 기준이며, 2주 단위로 보정한다.

- 기본식: `최종요금 = 기본요금 + 기간가중 + 난이도가중 + 긴급도가중 + 빈도가중`
- 반올림 규칙: 1,000원 단위 반올림
- 하한/상한: 최소 19,000원, 최대 99,000원

#### 1) 기본요금 (플랫폼 기준)

- Airbnb: 19,000원
- Agoda: 17,000원
- 기타: 19,000원

#### 2) 기간가중 (Q5 기준)

- S (24시간 이내): +0원
- M (24시간 초과 ~ 72시간): +5,000원
- L (72시간 초과 ~ 7일): +12,000원
- XL (7일 초과): +20,000원

#### 3) 난이도가중 (Q4 기준)

- L (조건 3개 이하): +0원
- M (조건 4~6개): +7,000원
- H (조건 7개 이상 또는 조합 조건): +15,000원

#### 4) 긴급도가중 (체크인 임박도)

- D-0 ~ D-1: +12,000원
- D-2 ~ D-3: +7,000원
- D-4 이상: +0원

#### 5) 빈도가중 (Q6 기준, 선택)

- 30분: +0원
- 15분: +5,000원
- 1시간 이상: -2,000원

#### 6) 고객 안내 템플릿 (가격 고지)

요청 조건 기준으로 진행 가능하며,
조건 충족(열림 확인) 시 1회 비용은 **{최종요금}원**입니다.
해당 요청은 조건 충족 1회만 유효하며, 최초 충족 시점에만 비용이 발생합니다.

## 5. Google Form 운영

### 폼 변경 대응 원칙 (번호 비고정)

- Q1~Q7은 현재 운영 템플릿의 별칭일 뿐, 고정 번호 규격이 아니다.
- 시스템은 질문 번호가 아니라 **질문 의미키(semantic key)** 로 파싱한다.
- 질문 순서 변경, 질문 추가/삭제, 문구 변경이 발생해도 의미키 매핑이 유효하면 운영을 지속한다.
- 의미키 매핑이 실패하면 자동 처리하지 않고 `NEEDS_REVIEW`로 격리한다.

### 질문 의미키 표준 (권장)

| 의미키 | 현재 별칭 | 설명 |
| --- | --- | --- |
| `contact_channel` | Q1 | 알림 채널 선택 |
| `contact_value` | Q2 | 채널 식별자(카카오 ID/이메일) |
| `target_url` | Q3 | 확인 대상 URL |
| `condition_definition` | Q4 | 조건 충족 정의(핵심 계약 조항) |
| `request_window` | Q5 | 확인 기간 |
| `check_frequency` | Q6 | 확인 빈도(선택) |
| `billing_consent` | Q7-1 | 조건 충족 시 비용 발생 동의 |
| `scope_consent` | Q7-2 | Q4 기준만 판단한다는 동의 |

### 폼 버전 관리 규칙

- `formVersion`을 도입해 질문 구조 변경 이력을 버전으로 관리한다.
- 각 제출 데이터는 `formVersion + mappingRevision`과 함께 저장한다.
- 운영 중 폼 변경 시 절차:
  1. 새 폼 구조 등록
  2. 의미키 매핑 검증
  3. 샘플 제출 테스트
  4. 운영 전환
- 구 버전/신 버전이 병행될 때도 동일 의미키로 정규화 저장한다.

### 필수 설정

- 응답 시트 연결: ON
- 새 응답 이메일 알림: ON
- 응답 수락: ON
- 제출 후 응답 수정 허용: OFF

### Q4 모호성 체크리스트

아래 중 하나라도 해당하면 `NEEDS_CLARIFICATION`으로 처리한다.

- “적당한”, “괜찮은”, “저렴한” 등 주관적 표현
- 가격/인원/날짜 중 하나라도 누락
- “열리면”의 기준 UI가 불명확

### 명확화 요청 템플릿

요청하신 조건 중 일부가 모호하여,
정확한 기준 확인 후 진행 가능합니다.
아래 항목을 명확히 부탁드립니다.

### Q1~Q7 질문 정의 및 역할 명세

주석: 아래 Q1~Q7은 현재 폼 템플릿 번호 기준이며, 실제 파싱은 의미키 기준으로 수행한다.

#### Q1. 연락 수단 선택

- 수집 내용: 알림 채널(카카오톡/이메일)
- 역할: 알림 경로 고정, 미수신 분쟁 방지
- 운영 원칙:
  - 전화번호 입력 강제 금지
  - 고객이 선택한 채널 외 연락 금지

#### Q2. 연락처 정보

- 수집 내용: Q1 채널의 식별자(카카오 ID/이메일)
- 역할: 알림 전달의 유일 식별 정보 고정
- 운영 원칙:
  - 오탈자 의심 시 진행 전 확인 필수
  - 잘못된 연락처로 인한 미수신은 운영 책임 아님

#### Q3. 확인 대상 URL

- 수집 내용: 실제 확인 대상 링크
- 역할: 감시 대상 Source of Truth 고정
- 운영 원칙:
  - URL 단답형 + URL 유효성 검사
  - 링크 미제공/캡처만 제출 시 진행 불가

#### Q4. 조건 충족(열림 확인) 기준

- 수집 내용: 어떤 상태를 조건 충족으로 볼지에 대한 명시적 정의
- 역할: 판단/과금의 유일 기준
- 운영 원칙:
  - Q4에 없는 조건 적용 금지
  - 애매하면 시작 전 명확화
  - 운영자 추정/해석 금지
- 주석: Q4(의미키 `condition_definition`)는 설명 질문이 아니라 계약 조항이다.

#### Q5. 확인 기간(마감 시점)

- 수집 내용: 확인 종료 시점(날짜/기간)
- 역할: 감시 종료 시점 고정
- 운영 원칙:
  - Q5 종료 시점까지 미충족이면 `EXPIRED`로 종료되고 비용은 0원
  - 기간 초과 후 조건 충족은 무효
  - 기간 연장은 새 폼 제출 원칙

#### Q6. 확인 빈도(선택)

- 수집 내용: 확인 주기(예: 30분/1시간/3시간)
- 역할: 운영 부하/고객 기대치 조정
- 운영 원칙:
  - 과도한 빈도는 운영자가 조정 가능
  - 빈도 조정은 시작 전에만 가능

#### Q7. 비용 발생 동의

- 수집 내용:
  - 조건 충족(열림 확인) 시 비용 발생 동의
  - Q4 기준만 판단 기준으로 삼는다는 동의
- 역할: 비용 청구의 운영/계약 근거 확보
- 운영 원칙:
  - 체크박스 2개 이상
  - 모두 선택 필수
  - 설명문보다 체크 문장 자체를 계약 근거로 취급

### Q1~Q7 요약표

| 질문 | 수집 내용 | 핵심 역할 |
| --- | --- | --- |
| Q1 | 연락 채널 | 알림 경로 고정 |
| Q2 | 연락처 | 수신 분쟁 방지 |
| Q3 | URL | 감시 대상 고정 |
| Q4 | 조건 정의 | 판단/과금 기준 |
| Q5 | 기간 | 종료 시점 고정 |
| Q6 | 빈도 | 기대치/부하 조절 |
| Q7 | 비용 동의 | 수익 권리 확보 |

### 폼 변경 시 안전 동작 (Fail-safe)

- 필수 의미키(`target_url`, `condition_definition`, `request_window`, `billing_consent`, `scope_consent`) 누락 시 자동 반려(`REJECTED_INVALID_FORM`)
- 부분 매핑 실패 시 자동 시작 금지 + 운영자 검토 큐(`NEEDS_REVIEW`)로 이동
- 매핑 버전 불일치 제출은 과금/알림 로직 진입 전 차단

## 6. 운영 SOP (표준 처리 절차)

1. 접수: 폼 제출 수신 후 케이스 생성 (`RECEIVED`)
2. 검토: Q4 모호성 점검, 필요 시 명확화 (`REVIEWING` or `NEEDS_CLARIFICATION`)
3. 비용 안내: 진행 가능 여부 + 비용 + 비보장 범위 고지 (`WAITING_PAYMENT`)
4. 시작: 결제 확인 후 모니터링 시작 (`ACTIVE_MONITORING`)
5. 조건 충족: 이벤트 기록 + 알림 발송 (`CONDITION_MET`)
6. 청구/종료: 비용 청구 또는 종료 안내 (`BILLED` -> `CLOSED`)

### 상태 전이 불변성

- `WAITING_PAYMENT` -> `ACTIVE_MONITORING`: 결제 확인 없이 이동 불가
- `ACTIVE_MONITORING` -> `CONDITION_MET`: 조건 충족 이벤트 + 증거 확보 필수
- `CONDITION_MET` -> `CLOSED`: 알림 발송 완료 후만 가능

이 규칙 위반은 운영 사고로 분류한다.

## 7. 증거 패킷 (Evidence Packet) 표준

조건 충족 발생 시 아래 4개를 하나의 패킷으로 저장한다.

- 타임스탬프(UTC, KST)
- Q4 원문 스냅샷
- 페이지 상태 스크린샷
- 알림 발송 기록(카카오톡/이메일)

분쟁 발생 시 Evidence Packet만 제시하고 추가 해석은 하지 않는다.

### Evidence Packet 자동화 설계 (v1.2)

#### 저장 스키마 (권장)

- `packetId`: 고유 ID
- `caseId`: 요청 케이스 ID
- `conditionMetEventId`: 조건 충족 이벤트 ID
- `capturedAtUtc`: UTC 타임스탬프
- `capturedAtKst`: KST 타임스탬프
- `q4Snapshot`: 조건 원문 스냅샷
- `pageScreenshotKey`: 스크린샷 저장 키
- `deliveryLogs`: 채널별 발송 결과(JSON)
- `integrityHash`: 핵심 필드 해시(SHA-256)
- `sealedAt`: 봉인 시각(이후 수정 금지)

#### 생성 플로우

1. `CONDITION_MET` 이벤트 생성
2. Q4 원문 스냅샷 고정
3. 페이지 상태 스크린샷 저장
4. 알림 발송 시도 및 결과 수집
5. `integrityHash` 생성 후 패킷 봉인

#### 무결성/중복 방지 규칙

- 멱등 키: `caseId + firstConditionMetAt`
- 동일 멱등 키에 대해 Evidence Packet 1개만 허용
- `sealedAt` 이후 수정/삭제 금지(관리자 논리 삭제만 허용)

#### 실패 대응

- 스크린샷 실패: 최대 3회 재시도 후 `PARTIAL` 상태 저장
- 발송 실패: Evidence Packet은 정상 봉인, 발송 재시도 큐로 이관
- 부분 실패 패킷도 분쟁 증거로는 유효하게 보존

#### 보존 정책

- 기본 보존 기간: 180일
- 분쟁 플래그 케이스: 해결 후 365일까지 연장 보존

## 8. KPI 및 의사결정 기준

### 핵심 지표

- 광고 클릭 수
- 폼 제출 수
- 결제 건수
- 조건 충족 건수
- 평균 1차 응답 시간
- 결제 전 시작 위반 건수(목표 0)
- 중복 과금 건수(목표 0)
- 분쟁 제기율(결제 건 대비)

### 2주차 강제 판단 기준

- 결제 1건 이상: 계속
- 폼 제출 5건 이상 + 결제 0건: 가격/문구 수정
- 폼 제출 3건 미만: 광고/타깃 수정
- 분쟁 1건 이상: Q4/Q7 문구 즉시 강화

## 9. 리스크 대응 (사전 차단 룰)

### 즉시 종료 조건

아래 문구가 확인되면 추가 설명 없이 종료한다.

- “이건 성공 아니죠?”
- “제가 못 봤는데요?”
- “일단 잡아둔 거잖아요?”

### 종료 표준 문장

운영 기준은 폼(Q4)과 제출 시 동의하신 Q7에 한해 적용됩니다.
해당 기준 외 추가 해석은 어렵습니다.

## 10. 확장 로드맵 (LLM/자동화 대비)

### 자동화 우선 대상

- Q4 구조화(조건 파싱)
- 열림 이벤트 로그 자동 캡처
- Evidence Packet 자동 생성

### 자동화 원칙

자동화는 판단을 대체하지 않고, 증거 수집과 기록만 담당한다.

## 11. 네이밍/표현 최종 원칙

### 허용 표현

- 조건 충족
- 열림 확인
- 상태 확인
- 알림 전달

### 금지 표현

- 성공
- 확정
- 보장
- 대행

## 12. 이 문서 핵심 요약 (다른 LLM용 3줄)

이 서비스는 예약 결과를 만들어주는 서비스가 아니라,
고객이 정의한 조건(Q4)이 충족되는 상태 변화를 탐지·통지하는 서비스다.
모든 판단·과금·분쟁 대응은 Q4 원문과 Q7 동의만을 기준으로 한다.

## 13. 가격 산식 운영 기록 템플릿 (v1.2)

아래 포맷으로 케이스별 가격 산정 근거를 반드시 기록한다.

- `caseId`: 케이스 ID
- `baseFee`: 기본요금
- `durationWeight`: 기간가중
- `difficultyWeight`: 난이도가중
- `urgencyWeight`: 긴급도가중
- `frequencyWeight`: 빈도가중
- `rawTotal`: 가감 전 합계
- `finalPrice`: 반올림 + 하한/상한 적용 후 금액
- `pricedBy`: 산정자
- `pricedAt`: 산정 시각

### 기록 예시

- `caseId`: `case_20260211_001`
- `baseFee`: 19,000
- `durationWeight`: 5,000
- `difficultyWeight`: 7,000
- `urgencyWeight`: 12,000
- `frequencyWeight`: 0
- `rawTotal`: 43,000
- `finalPrice`: 43,000

## 14. Q4 자동 검증 규칙 (LLM 보조)

LLM은 보조 도구이며, 최종 판정은 규칙 엔진이 수행한다.

### 필수 슬롯

- 대상(URL/숙소명)
- 기간(Q5와 정합되는 날짜/구간)
- 인원(성인/객실)
- 조건 트리거 문구(예: 예약 가능/구매 가능/선택 가능)

### 모호 표현 사전

다음 표현이 포함되면 자동 `NEEDS_CLARIFICATION` 플래그를 건다.

- 적당한
- 괜찮은
- 저렴한
- 좋은 가격
- 가능하면
- 빨리

### 판정 레벨

- `GREEN`: 필수 슬롯 충족 + 모호 표현 없음 -> 검토 통과
- `AMBER`: 필수 슬롯 일부 누락 또는 모호 표현 포함 -> 명확화 요청
- `RED`: 대상/기간/트리거 누락 -> 접수 반려

### LLM 출력 표준(JSON)

`{ "severity": "GREEN|AMBER|RED", "missingFields": [], "ambiguousTerms": [], "normalizedCondition": "" }`

### 안전장치

- LLM 단독 판정으로 자동 시작 금지
- `AMBER/RED`는 운영자 확인 전 다음 상태 전이 금지

## 15. 운영자 보호 규칙 (지속 운영)

- 운영자는 피로/감정/개인 사정으로 판단 기준(Q4/Q7/상태 전이)을 변경하지 않는다.
- 운영이 어려운 시간대에는 신규 접수를 일시 중단할 수 있다.

## 16. 다음 구체화 항목 (v1.3 후보)

- 다인 운영 위임용 체크리스트(신규 운영자 온보딩 스크립트)
- 시간대별 자동 접수 제한 정책
- 분쟁 케이스 자동 분류 라벨링
