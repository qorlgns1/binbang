# ===========================================
# Root env (.env)
# Used by: shared infra (DB/Redis), docker compose, common defaults
# App-specific secrets are managed per app:
#   cp apps/web/.env.example apps/web/.env.local
#   cp apps/travel/.env.example apps/travel/.env.local
#   cp apps/worker/.env.example apps/worker/.env.local
# ===========================================

# ===========================================
# Runtime profile
# ===========================================
APP_ENV=local

# ===========================================
# Core infrastructure (required)
# ===========================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/accommodation_monitor
REDIS_URL=redis://localhost:6379

# ===========================================
# Shared auth (common for web + travel)
# ===========================================
NEXTAUTH_SECRET=replace-with-random-secret
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
KAKAO_CLIENT_ID=your-kakao-rest-api-key
KAKAO_CLIENT_SECRET=your-kakao-client-secret

# ===========================================
# Local docker compose ports/credentials (optional)
# Used by: docker/docker-compose.local.yml
# ===========================================
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=accommodation_monitor
DB_PORT=5432
REDIS_PORT=6379

# Container-internal overrides (optional)
# DATABASE_URL_DOCKER=postgresql://postgres:postgres@db:5432/accommodation_monitor
# REDIS_URL_DOCKER=redis://redis:6379

# ===========================================
# Worker <-> Web communication
# ===========================================
WORKER_CONTROL_PORT=3500
WORKER_INTERNAL_URL=http://localhost:3500
# If web runs inside docker network:
# WORKER_INTERNAL_URL=http://worker:3500

# ===========================================
# Monitoring / heartbeat tuning (optional)
# ===========================================
HEARTBEAT_INTERVAL_MS=60000
HEARTBEAT_MISSED_THRESHOLD=1
HEARTBEAT_CHECK_INTERVAL_MS=60000
MAX_PROCESSING_TIME_MS=3600000
WORKER_HEALTHY_THRESHOLD_MS=2400000
WORKER_DEGRADED_THRESHOLD_MS=5400000

# ===========================================
# Runtime fallback settings (optional)
# Used only when DB system settings are missing
# ===========================================
# CRON_SCHEDULE=*/30 * * * *
# WORKER_CONCURRENCY=1
# BROWSER_POOL_SIZE=1
# NAVIGATION_TIMEOUT_MS=25000
# CONTENT_WAIT_MS=10000
# PATTERN_RETRY_MS=5000
# BLOCK_RESOURCE_TYPES=image,media,font

# Docker environment hint for web restart endpoint (optional)
# DOCKER_ENV=false
