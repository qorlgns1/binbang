# ===========================================
# Root env (.env)
# Used by: worker, db scripts, local docker compose
# Web auth/OAuth/analytics vars:
#   cp apps/web/.env.example apps/web/.env.local
# ===========================================

# ===========================================
# Runtime profile
# ===========================================
APP_ENV=local

# ===========================================
# Core infrastructure (required)
# ===========================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/accommodation_monitor
REDIS_URL=redis://localhost:6379

# ===========================================
# Shared auth / notification
# ===========================================
NEXTAUTH_URL=http://localhost:3000
KAKAO_CLIENT_ID=your-kakao-rest-api-key
KAKAO_CLIENT_SECRET=your-kakao-client-secret
# Web-only auth vars are managed in apps/web/.env.local:
NEXTAUTH_SECRET=...
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
# Google Places Admin(server) 검색용 키 (HTTP referrer 제한 키 말고 서버용 키 권장)
GOOGLE_PLACES_SERVER_API_KEY=
GOOGLE_PLACES_API_KEY=

# ===========================================
# Hotelbeds API (optional, required for HOTELBEDS platform checks)
# ===========================================
HOTELBEDS_API_KEY=
HOTELBEDS_SECRET=
HOTELBEDS_BASE_URL=https://api.test.hotelbeds.com

# ===========================================
# Travel Planner APIs (optional, for travel score calculation)
# ===========================================
# OpenWeatherMap API - Free tier: 1,000 calls/day
# Sign up: https://openweathermap.org/api
# curl "https://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=YOUR_API_KEY&units=metric&lang=kr"
OPENWEATHER_API_KEY=

# ExchangeRate API - Free tier: 1,500 calls/month
# Sign up: https://www.exchangerate-api.com/
# curl "https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/USD"
# curl "https://v6.exchangerate-api.com/v6/YOUR_API_KEY/quota"
EXCHANGERATE_API_KEY=

# 한국관광공사 API - Free (공공데이터포털 인증키)
# Sign up: https://www.data.go.kr/
KOREA_TOUR_API_KEY=

# ===========================================
# Local docker compose ports/credentials (optional)
# Used by: docker/docker-compose.local.yml
# ===========================================
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=accommodation_monitor
DB_PORT=5432
REDIS_PORT=6379
WEB_PORT=3000

# Container-internal overrides (optional)
# DATABASE_URL_DOCKER=postgresql://postgres:postgres@db:5432/accommodation_monitor
# REDIS_URL_DOCKER=redis://redis:6379

# ===========================================
# Worker <-> Web communication
# ===========================================
WORKER_CONTROL_PORT=3500
WORKER_INTERNAL_URL=http://localhost:3500
# If web runs inside docker network:
# WORKER_INTERNAL_URL=http://worker:3500

# ===========================================
# Monitoring / heartbeat tuning (optional)
# ===========================================
HEARTBEAT_INTERVAL_MS=60000
HEARTBEAT_MISSED_THRESHOLD=1
HEARTBEAT_CHECK_INTERVAL_MS=60000
MAX_PROCESSING_TIME_MS=3600000
WORKER_HEALTHY_THRESHOLD_MS=2400000
WORKER_DEGRADED_THRESHOLD_MS=5400000

# ===========================================
# Runtime fallback settings (optional)
# Used only when DB system settings are missing
# ===========================================
# CRON_SCHEDULE=*/30 * * * *
# WORKER_CONCURRENCY=1
# BROWSER_POOL_SIZE=1
# NAVIGATION_TIMEOUT_MS=25000
# CONTENT_WAIT_MS=10000
# PATTERN_RETRY_MS=5000
# BLOCK_RESOURCE_TYPES=image,media,font

# Docker environment hint for web restart endpoint (optional)
# DOCKER_ENV=false
